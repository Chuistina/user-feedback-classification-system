import pandas as pd
import random

def create_chinese_dataset():
    """创建中文用户反馈数据集"""
    
    # 定义各类别的中文样本
    samples = {
        "Bug反馈": [
            "系统出现崩溃，无法正常使用",
            "点击按钮没有反应，页面卡死",
            "登录后页面显示空白",
            "上传文件失败，出现错误提示", 
            "数据保存不成功，丢失了工作内容",
            "界面显示异常，文字重叠",
            "搜索功能不工作，无法找到结果",
            "删除操作失败，数据还在",
            "表单提交后出现500错误",
            "图片无法加载，显示错误图标",
            "计算结果不正确，存在错误",
            "导出功能异常，文件损坏",
            "刷新页面后数据丢失",
            "系统自动退出，需要重新登录",
            "菜单点击无效，无法打开",
            "验证码显示不正常",
            "密码重置功能不起作用",
            "邮件发送失败，收不到通知",
            "时间显示错误，格式混乱",
            "权限设置无效，仍可访问限制内容"
        ],
        "功能建议": [
            "希望能增加搜索过滤功能",
            "建议添加批量操作功能", 
            "能否支持多语言切换",
            "希望有数据导出到Excel的功能",
            "建议增加夜间模式",
            "能否添加快捷键支持",
            "希望能自定义界面布局",
            "建议增加数据备份功能",
            "能否支持拖拽上传文件",
            "希望有更详细的使用教程",
            "建议添加消息提醒功能",
            "能否支持离线使用",
            "希望增加数据统计图表",
            "建议添加协作功能",
            "能否支持移动端访问",
            "希望有更多的模板选择",
            "建议增加自动保存功能",
            "能否添加评论功能",
            "希望支持更多文件格式",
            "建议增加用户权限管理"
        ],
        "账号问题": [
            "无法登录，密码正确但提示错误",
            "忘记密码，重置邮件收不到",
            "账号被锁定，不知道原因",
            "注册时提示邮箱已存在",
            "修改个人信息保存失败",
            "两步验证设置不成功",
            "账号权限不够，无法访问某些功能",
            "登录后显示的不是我的信息",
            "注销功能不工作，无法退出",
            "修改密码后仍用旧密码可以登录",
            "邮箱验证链接失效",
            "用户名修改失败",
            "头像上传不成功",
            "绑定手机号码失败",
            "账号合并功能有问题",
            "第三方登录失败",
            "会话超时时间太短",
            "多设备登录冲突",
            "账号注销申请处理太慢",
            "实名认证审核失败"
        ],
        "网络连接失败": [
            "页面加载超时，请求失败",
            "网络连接不稳定，经常断线",
            "上传文件时连接中断",
            "API请求响应时间过长",
            "下载文件时连接超时",
            "视频播放卡顿，网络问题",
            "同步数据失败，连接错误",
            "代理设置不生效",
            "跨域请求被阻止",
            "WebSocket连接异常",
            "CDN加速不稳定",
            "DNS解析失败",
            "SSL证书验证失败",
            "防火墙阻止了连接",
            "网络延迟太高，影响使用",
            "移动网络下无法访问",
            "IPv6连接有问题",
            "负载均衡器响应异常",
            "网络带宽不足，加载慢",
            "VPN环境下连接失败"
        ],
        "文档问题": [
            "API文档信息不完整",
            "使用教程步骤不清楚",
            "示例代码有错误，无法运行",
            "文档版本太旧，与实际不符",
            "缺少重要功能的说明",
            "文档中的链接失效",
            "翻译质量差，理解困难",
            "图片显示不清楚",
            "缺少常见问题解答",
            "技术文档太复杂，不易理解",
            "更新日志不及时",
            "安装指南有误",
            "配置说明不详细",
            "错误代码含义不明确",
            "文档搜索功能不好用",
            "缺少视频教程",
            "文档格式混乱",
            "代码高亮显示异常",
            "下载的文档文件损坏",
            "多语言文档不同步"
        ],
        "性能问题": [
            "系统运行缓慢，响应时间长",
            "大量数据加载时卡顿",
            "内存占用过高，系统变慢",
            "CPU使用率异常，风扇狂转",
            "数据库查询太慢",
            "文件上传速度很慢",
            "页面渲染延迟严重",
            "滚动时出现卡顿",
            "搜索结果返回太慢",
            "批量操作耗时过长",
            "图片加载速度慢",
            "动画效果不流畅",
            "大文件处理效率低",
            "并发访问时性能下降",
            "缓存机制不生效",
            "数据同步速度慢",
            "报表生成时间太长",
            "移动端性能差",
            "网页打开速度慢",
            "系统在高峰期很卡"
        ]
    }
    
    # 创建数据集
    data = []
    for category, texts in samples.items():
        for text in texts:
            data.append({
                'id': len(data) + 1,
                'title': text[:20] + "...",  # 模拟标题
                'body': text,  # 模拟正文
                'category': category,
                'urgency': random.choice(['高', '中', '低']),
                'html_url': f"https://example.com/issues/{len(data) + 1}",
                'cleaned_title': text[:20] + "...",
                'cleaned_body': text,
                'text_for_classification': text
            })
    
    # 创建DataFrame并保存
    df = pd.DataFrame(data)
    
    # 打乱数据
    df = df.sample(frac=1, random_state=42).reset_index(drop=True)
    
    print("中文数据集统计:")
    print(df['category'].value_counts())
    print(f"\n总计: {len(df)} 条数据")
    
    # 保存到新文件
    output_file = "data/labeling/chinese_dataset.csv"
    df.to_csv(output_file, index=False, encoding='utf-8')
    print(f"\n中文数据集已保存到: {output_file}")
    
    return df

if __name__ == "__main__":
    create_chinese_dataset()

